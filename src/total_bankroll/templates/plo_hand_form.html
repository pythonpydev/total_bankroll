{% extends "base.html" %}
{% from "_macros.html" import page_header %}

{% block content %}
{{ page_header('Pot Limit Omaha Tools', 'Analyze hand strength and calculate Stack-to-Pot Ratio.') }}

<section class="page-section" id="portfolio">
    <div class="container px-4 px-lg-5">
      <div class="plo-form-container">
        <div class="image-container">
          <img src="{{ url_for('static', filename='images/tables/poker_table_pot_btn_chips' ~ button_position ~ '.png') }}" alt="Poker Table" class="poker-table" id="pokerTable">
          <div id="seat-1" class="seat">
            <div class="seat-label">Seat 1</div>
            <div class="position-label"></div>
          </div>
          <div id="seat-2" class="seat">
            <div class="seat-label">Seat 2</div>
            <div class="position-label"></div>
          </div>
          <div id="seat-3" class="seat">
            <div class="seat-label">Seat 3</div>
            <div class="position-label"></div>
          </div>
          <div id="seat-4" class="seat">
            <div class="seat-label">Seat 4</div>
            <div class="position-label"></div>
          </div>
          <div id="seat-5" class="seat">
            <div class="seat-label">Seat 5</div>
            <div class="position-label"></div>
          </div>
          <div id="seat-6" class="seat">
            <div class="seat-label">Seat 6</div>
            <div class="position-label"></div>
          </div>
        </div>
        <form action="{{ url_for('hand_eval.switch_button_position') }}" method="post" class="button-group">
          {{ button_form.hidden_tag() }}
          <label>Choose button position:</label>
            <button type="submit" name="button_position" value="1" class="btn btn-primary btn-md">1</button>
          <button type="submit" name="button_position" value="2" class="btn btn-primary btn-md">2</button>
          <button type="submit" name="button_position" value="3" class="btn btn-primary btn-md">3</button>
          <button type="submit" name="button_position" value="4" class="btn btn-primary btn-md">4</button>
          <button type="submit" name="button_position" value="5" class="btn btn-primary btn-md">5</button>
            <button type="submit" name="button_position" value="6" class="btn btn-primary btn-md">6</button>
        </form>

        <form id="ploForm" action="{{ url_for('hand_eval.submit_form') }}" method="post" class="poker-form" novalidate>
          {{ hand_form.hidden_tag() }}
          <div class="row g-3">
            <!-- Blinds -->
            <div class="col-md-6">
              {{ hand_form.small_blind.label(class="form-label") }}
              {{ hand_form.small_blind(class="form-control" + (" is-invalid" if hand_form.small_blind.errors else ""), placeholder="e.g., 1") }}
              {% for error in hand_form.small_blind.errors %}
                <div class="invalid-feedback">{{ error }}</div>
              {% endfor %}
            </div>
            <div class="col-md-6">
              {{ hand_form.big_blind.label(class="form-label") }}
              {{ hand_form.big_blind(class="form-control" + (" is-invalid" if hand_form.big_blind.errors else ""), placeholder="e.g., 2") }}
              {% for error in hand_form.big_blind.errors %}
                <div class="invalid-feedback">{{ error }}</div>
              {% endfor %}
            </div>

            <!-- Hero Info -->
            <div class="col-md-4">
              {{ hand_form.hero_stack.label(class="form-label") }}
              {{ hand_form.hero_stack(class="form-control" + (" is-invalid" if hand_form.hero_stack.errors else ""), placeholder="e.g., 200") }}
              {% for error in hand_form.hero_stack.errors %}
                <div class="invalid-feedback">{{ error }}</div>
              {% endfor %}
            </div>
            <div class="col-md-4">
              {{ hand_form.hero_position.label(class="form-label") }}
              {{ hand_form.hero_position(class="form-select" + (" is-invalid" if hand_form.hero_position.errors else "")) }}
              {% for error in hand_form.hero_position.errors %}
                <div class="invalid-feedback">{{ error }}</div>
              {% endfor %}
            </div>
            <div class="col-md-4">
              {{ hand_form.hero_hand.label(class="form-label") }}
              {{ hand_form.hero_hand(class="form-control" + (" is-invalid" if hand_form.hero_hand.errors else ""), placeholder="e.g., AsKsQhJh") }}
              {% for error in hand_form.hero_hand.errors %}
                <div class="invalid-feedback">{{ error }}</div>
              {% endfor %}
            </div>

            <!-- Opponent Info -->
            <div class="col-md-4">
              {{ hand_form.opponent_stack.label(class="form-label") }}
              {{ hand_form.opponent_stack(class="form-control" + (" is-invalid" if hand_form.opponent_stack.errors else ""), placeholder="e.g., 200") }}
              {% for error in hand_form.opponent_stack.errors %}
                <div class="invalid-feedback">{{ error }}</div>
              {% endfor %}
            </div>
            <div class="col-md-4">
              {{ hand_form.opponent_position.label(class="form-label") }}
              {{ hand_form.opponent_position(class="form-select" + (" is-invalid" if hand_form.opponent_position.errors else "")) }}
              {% for error in hand_form.opponent_position.errors %}
                <div class="invalid-feedback">{{ error }}</div>
              {% endfor %}
            </div>
            <div class="col-md-4">
              {{ hand_form.opponent_hand.label(class="form-label") }}
              {{ hand_form.opponent_hand(class="form-control" + (" is-invalid" if hand_form.opponent_hand.errors else ""), placeholder="e.g., 2s2h3d4c") }}
              {% for error in hand_form.opponent_hand.errors %}
                <div class="invalid-feedback">{{ error }}</div>
              {% endfor %}
            </div>

            <!-- Game State -->
            <div class="col-md-4">
              {{ hand_form.board.label(class="form-label") }}
              {{ hand_form.board(class="form-control" + (" is-invalid" if hand_form.board.errors else ""), placeholder="e.g., AcKcTc") }}
              {% for error in hand_form.board.errors %}
                <div class="invalid-feedback">{{ error }}</div>
              {% endfor %}
            </div>
            <div class="col-md-4">
              {{ hand_form.pot_size.label(class="form-label") }}
              {{ hand_form.pot_size(class="form-control" + (" is-invalid" if hand_form.pot_size.errors else ""), placeholder="e.g., 6") }}
              {% for error in hand_form.pot_size.errors %}
                <div class="invalid-feedback">{{ error }}</div>
              {% endfor %}
            </div>
            <div class="col-md-4">
              {{ hand_form.bet_size.label(class="form-label") }}
              {{ hand_form.bet_size(class="form-control" + (" is-invalid" if hand_form.bet_size.errors else ""), placeholder="e.g., 6") }}
              {% for error in hand_form.bet_size.errors %}
                <div class="invalid-feedback">{{ error }}</div>
              {% endfor %}
            </div>
          </div>
          {{ hand_form.submit(class="btn btn-primary mt-4") }}
        </form>
      </div>
  </section>
{% endblock %}