{% extends "base.html" %}

{% block content %}
<section class="page-section bg-primary" id="poker_stakes_intro">
    <div class="container px-4 px-lg-5">
        <div class="row gx-4 gx-lg-5 justify-content-center">
            <div class="col-lg-8 text-center">
                <h2 class="text-white mt-0">Poker Stakes</h2>
                <hr class="divider divider-light" />
                <p class="text-white-75 mb-4">This page will provide recommendations for poker stakes.</p>
            </div>
        </div>
    </div>
</section>

<section class="page-section" id="poker_stakes_content">
    <div class="container px-4 px-lg-5 text-center">
        <form method="GET" action="{{ url_for('tools.poker_stakes_page') }}">
            <div class="row justify-content-center align-items-end g-3 mb-5">
                <div class="col-sm-6 col-lg-2">
                    <label for="game_type" class="form-label fw-bold">Game Type</label>
                    <select class="form-select" id="game_type" name="game_type">
                        <option value="na" {% if game_type == 'na' %}selected{% endif %}>Not Applicable (NA)</option>
                        <option value="limit_holdem" {% if game_type == 'limit_holdem' %}selected{% endif %}>Limit Holdâ€™Em</option>
                        <option value="nlhe" {% if game_type == 'nlhe' %}selected{% endif %}>NLHE</option>
                        <option value="plo" {% if game_type == 'plo' %}selected{% endif %}>PLO</option>
                    </select>
                </div>
                <div class="col-sm-6 col-lg-2">
                    <label for="skill_level" class="form-label fw-bold">Skill Level</label>
                    <select class="form-select" id="skill_level" name="skill_level">
                        <option value="na" {% if skill_level == 'na' %}selected{% endif %}>Not Applicable (NA)</option>
                        <option value="soft" {% if skill_level == 'soft' %}selected{% endif %}>Soft Games</option>
                        <option value="tough" {% if skill_level == 'tough' %}selected{% endif %}>Tough Games</option>
                    </select>
                </div>
                <div class="col-sm-6 col-lg-2">
                    <label for="risk_tolerance" class="form-label fw-bold">Risk Tolerance</label>
                    <select class="form-select" id="risk_tolerance" name="risk_tolerance">
                        <option value="na" {% if risk_tolerance == 'na' %}selected{% endif %}>Not Applicable (NA)</option>
                        <option value="conservative" {% if risk_tolerance == 'conservative' %}selected{% endif %}>Conservative</option>
                        <option value="aggressive" {% if risk_tolerance == 'aggressive' %}selected{% endif %}>Aggressive</option>
                    </select>
                </div>
                <div class="col-sm-6 col-lg-2">
                    <label for="game_environment" class="form-label fw-bold">Game Environment</label>
                    <select class="form-select" id="game_environment" name="game_environment">
                        <option value="na" {% if game_environment == 'na' %}selected{% endif %}>Not Applicable (NA)</option>
                        <option value="live" {% if game_environment == 'live' %}selected{% endif %}>Live Poker</option>
                        <option value="online" {% if game_environment == 'online' %}selected{% endif %}>Online Poker</option>
                    </select>
                </div>
                <div class="col-sm-12 col-lg-2">
                    <button type="submit" class="btn btn-primary w-100">Update</button>
                </div>
            </div>
        </form>
        <h2 class="mt-0">Poker Stakes Recommendations</h2>
        <hr class="divider" />
        <p class="text-muted mb-4">Your current total bankroll is: <span class="bi-bank"> $ </span> {{ "%.2f" | format(total_bankroll) }}</p>

        <h3 class="mt-5">Recommended Cash Game Stakes: {{ recommended_stake }}</h3>
        <p class="text-muted mb-4">{{ stake_explanation }}</p>

        {% if move_down_message %}
        <p class="text-muted mb-4"><span class="text-info">{{ move_down_message }}</span></p>
        {% endif %}

        {% if next_stake_message %}
        <p class="text-muted mb-4"><span class="text-danger">{{ next_stake_message }}</span></p>
        {% endif %}

        <h3 class="mt-5">Cash Game Stakes</h3>
        <table class="table table-bordered table-striped mx-auto" style="max-width: 400px;">
            <thead>
                <tr>
                    {% for header in cash_stakes_table[0] %}
                    <th>{{ header }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for row in cash_stakes_table[1:] %}
                {% set current_stake = row[1] + '/' + row[2] %}
                <tr {% if current_stake == next_stake_level %}class="table-danger fw-bold"{% elif current_stake == move_down_stake_level %}class="table-info fw-bold"{% elif current_stake == recommended_stake %}class="table-success fw-bold"{% endif %}>
                    {% for cell in row %}
                    <td>{{ cell }}</td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</section>
{% endblock %}